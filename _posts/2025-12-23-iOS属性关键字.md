---
layout: post
title: iOSå±æ€§å…³é”®å­—
date: 2025-12-23
tag: iOS
---

### iOSå±æ€§å…³é”®å­—
<img src="/images/posts/iOSå±æ€§å…³é”®å­—/iOSå±æ€§å…³é”®å­—1.png" > 
ä¸€ã€å±æ€§å£°æ˜æ•´ä½“ç»“æ„
```
@property (nonatomic, strong, readonly) NSString *name;
```

å±æ€§å…³é”®å­—åˆ† 4 å¤§ç±»ï¼š
	1.	åŸå­æ€§ï¼ˆAtomicityï¼‰
	2.	è¯»å†™æƒé™ï¼ˆRead/Writeï¼‰
	3.	å†…å­˜ç®¡ç†è¯­ä¹‰ï¼ˆOwnershipï¼‰
	4.	çº¿ç¨‹ & ç‰¹æ®Šä¿®é¥°ï¼ˆOtherï¼‰

äºŒã€åŸå­æ€§å…³é”®å­—ï¼ˆAtomicityï¼‰

<img src="/images/posts/iOSå±æ€§å…³é”®å­—/iOSå±æ€§å…³é”®å­—2.png" > 

1ï¸âƒ£ atomicï¼ˆé»˜è®¤ï¼‰

```
@property (atomic, strong) NSObject *obj;
```

ç‰¹ç‚¹
	â€¢	ä¿è¯ getter / setter çš„â€œåŸå­æ€§â€
	â€¢	å®é™…å®ç°ï¼šå†…éƒ¨åŠ  è‡ªæ—‹é”
	â€¢	â—ä¸ä¿è¯çº¿ç¨‹å®‰å…¨
```
self.obj = a;
self.obj = b; // ä¸ä¼šå´©ï¼Œä½†é€»è¾‘ä»å¯èƒ½é”™
```

é—®é¢˜
	â€¢	æ€§èƒ½å¼€é”€å¤§
	â€¢	iOS UI ä¸»çº¿ç¨‹ç”¨ä¸åˆ°

2ï¸âƒ£ nonatomicï¼ˆæ¨èï¼‰

```
@property (nonatomic, strong) NSObject *obj;
```

ç‰¹ç‚¹
	â€¢	ä¸åŠ é”
	â€¢	æ€§èƒ½æ›´å¥½
	â€¢	99% iOS é¡¹ç›®éƒ½ç”¨

ğŸ“Œ é¢è¯•å›ç­”è¦ç‚¹ï¼š

atomic åªä¿è¯ getter/setter çš„åŸå­æ€§ï¼Œä¸ä¿è¯çº¿ç¨‹å®‰å…¨ï¼Œæ‰€ä»¥å®é™…é¡¹ç›®ä¸­å…¨éƒ¨ä½¿ç”¨ nonatomicã€‚

ä¸‰ã€è¯»å†™æƒé™å…³é”®å­—
<img src="/images/posts/iOSå±æ€§å…³é”®å­—/iOSå±æ€§å…³é”®å­—3.png" > 

1ï¸âƒ£ readwriteï¼ˆé»˜è®¤ï¼‰

```
@property (nonatomic, readwrite, strong) NSString *title;
```
ç”Ÿæˆ getter + setter

2ï¸âƒ£ readonly
```
@property (nonatomic, readonly, strong) NSString *token;
```

ä½¿ç”¨åœºæ™¯
	â€¢	å¯¹å¤–åªè¯»ï¼Œå¯¹å†…å¯å†™
	â€¢	å¸¸è§å†™æ³•ï¼ˆä½ å‰å‡ å¤©æ­£å¥½é—®è¿‡ ğŸ‘‡ï¼‰

```
// .h
@property (nonatomic, readonly) BOOL prepared;

// .m
@interface MyClass ()
@property (nonatomic, readwrite) BOOL prepared;
@end
```
ğŸ“Œ é¢è¯•é«˜é¢‘ç‚¹ï¼š
readonly + ç±»æ‰©å±• = å¯¹å¤–ä¸å¯ä¿®æ”¹

å››ã€å†…å­˜ç®¡ç†å…³é”®å­—ï¼ˆé‡ä¸­ä¹‹é‡ï¼‰

<img src="/images/posts/iOSå±æ€§å…³é”®å­—/iOSå±æ€§å…³é”®å­—4.png" > 

1ï¸âƒ£ strongï¼ˆå¼ºå¼•ç”¨ï¼‰

```
@property (nonatomic, strong) NSObject *obj;
```

æœ¬è´¨
	â€¢	ARC ä¸‹ç­‰ä»·äº retain
	â€¢	å¼•ç”¨è®¡æ•° +1

ä½¿ç”¨åœºæ™¯
	â€¢	å¯¹è±¡æ‰€æœ‰æƒ
	â€¢	Modelã€Viewã€Controller

â— å¾ªç¯å¼•ç”¨é£é™©

```
self.block = ^{
    self.doSomething; // âŒ
};
```

2ï¸âƒ£ weakï¼ˆå¼±å¼•ç”¨ï¼‰
<img src="/images/posts/iOSå±æ€§å…³é”®å­—/iOSå±æ€§å…³é”®å­—6.png" > 

```
@property (nonatomic, weak) id delegate;
```

ç‰¹ç‚¹
	â€¢	ä¸å¢åŠ å¼•ç”¨è®¡æ•°
	â€¢	å¯¹è±¡é‡Šæ”¾åè‡ªåŠ¨ç½® nil
	â€¢	åº•å±‚ï¼šSideTable + weak table

ä½¿ç”¨åœºæ™¯
	â€¢	delegate
	â€¢	IBOutlet
	â€¢	è§£å†³å¾ªç¯å¼•ç”¨

ğŸ“Œ é¢è¯•é¢˜ï¼š

ä¸ºä»€ä¹ˆ delegate ç”¨ weakï¼Ÿ

é˜²æ­¢å¾ªç¯å¼•ç”¨

3ï¸âƒ£ assign

<img src="/images/posts/iOSå±æ€§å…³é”®å­—/iOSå±æ€§å…³é”®å­—5.png" > 

```
@property (nonatomic, assign) NSInteger count;
```

ä½¿ç”¨åœºæ™¯
	â€¢	åŸºæœ¬æ•°æ®ç±»å‹
	â€¢	C ç»“æ„ä½“

â— ä¸è¦ç”¨äº OC å¯¹è±¡
```
@property (nonatomic, assign) NSObject *obj; // é‡æŒ‡é’ˆé£é™©
```

4ï¸âƒ£ copy

<img src="/images/posts/iOSå±æ€§å…³é”®å­—/iOSå±æ€§å…³é”®å­—7.png" > 
```
@property (nonatomic, copy) NSString *name;
```

ä¸ºä»€ä¹ˆ NSString ç”¨ copyï¼Ÿ
```
NSMutableString *str = [NSMutableString stringWithString:@"abc"];
self.name = str;
[str appendString:@"def"];
```

	â€¢	strong â†’ name å˜æˆ "abcdef"
	â€¢	copy â†’ name ä»æ˜¯ "abc"

ğŸ“Œ æ ‡å‡†ç»“è®ºï¼š
	â€¢	NSString
	â€¢	NSArray
	â€¢	NSDictionary
â¡ï¸ ç”¨ copy
<img src="/images/posts/iOSå±æ€§å…³é”®å­—/iOSå±æ€§å…³é”®å­—8.png" > 

5ï¸âƒ£ unsafe_unretainedï¼ˆå‡ ä¹ä¸ç”¨ï¼‰
```
@property (nonatomic, unsafe_unretained) id obj;
```
	â€¢	ä¸ç½® nil
	â€¢	å·²é‡Šæ”¾å¯¹è±¡ä»å¯è®¿é—® â†’ å´©æºƒ

äº”ã€Block å±æ€§å…³é”®å­—ï¼ˆé¢è¯•é‡ç‚¹ï¼‰
```
@property (nonatomic, copy) void (^block)(void);
```

ä¸ºä»€ä¹ˆ block ç”¨ copyï¼Ÿ
	â€¢	æ ˆ Block â†’ copy åˆ° å †
	â€¢	ä¿è¯ç”Ÿå‘½å‘¨æœŸ

ğŸ“Œ é¢è¯•æ ‡å‡†ç­”æ¡ˆï¼š

Block å±æ€§å¿…é¡»ç”¨ copyï¼Œå¦åˆ™å¯èƒ½è®¿é—®å·²é‡Šæ”¾çš„æ ˆå†…å­˜ã€‚

å…­ã€IBOutlet & IBOutletCollection
```
@property (nonatomic, weak) IBOutlet UILabel *label;
```
ä¸ºä»€ä¹ˆæ˜¯ weakï¼Ÿ
	â€¢	View å±‚çº§å·²å¼ºå¼•ç”¨
	â€¢	é˜²æ­¢å¾ªç¯å¼•ç”¨

3ï¸âƒ£ classï¼ˆç±»å±æ€§ï¼‰
```
@property (class, nonatomic, assign) NSInteger count;
```

ç­‰ä»·äºï¼š
```
+ (NSInteger)count;
+ (void)setCount:(NSInteger)count;
```

ä¸ƒã€æ·±æ‹·è´å’Œæµ…æ‹·è´ 
<img src="/images/posts/iOSå±æ€§å…³é”®å­—/iOSå±æ€§å…³é”®å­—9.png" > 

ä¸€ã€ä»€ä¹ˆæ˜¯æµ…æ‹·è´ / æ·±æ‹·è´
<img src="/images/posts/iOSå±æ€§å…³é”®å­—/iOSå±æ€§å…³é”®å­—10.png" > 

1ï¸âƒ£ æµ…æ‹·è´ï¼ˆShallow Copyï¼‰
	â€¢	åªæ‹·è´æŒ‡é’ˆ
	â€¢	æ–°æ—§å¯¹è±¡ æŒ‡å‘åŒä¸€å—å†…å­˜
	â€¢	ä¿®æ”¹å…¶ä¸­ä¸€ä¸ª â†’ å¦ä¸€ä¸ªâ€œçœ‹èµ·æ¥ä¹Ÿå˜äº†â€
```
NSString *a = @"abc";
NSString *b = a;   // æµ…æ‹·è´ï¼ˆæŒ‡é’ˆæ‹·è´ï¼‰
```
```
a â”€â”
   â”œâ”€â”€> "abc"
b â”€â”˜
```

2ï¸âƒ£ æ·±æ‹·è´ï¼ˆDeep Copyï¼‰
<img src="/images/posts/iOSå±æ€§å…³é”®å­—/iOSå±æ€§å…³é”®å­—11.png" > 
	â€¢	åˆ›å»ºæ–°çš„å¯¹è±¡
	â€¢	æ‹·è´å¯¹è±¡å†…å®¹
	â€¢	ä¿®æ”¹äº’ä¸å½±å“
```
NSMutableString *a = [NSMutableString stringWithString:@"abc"];
NSMutableString *b = [a copy]; // å†…å®¹æ‹·è´
```

ä¸ƒã€å¸¸è§ç»„åˆ
<img src="/images/posts/iOSå±æ€§å…³é”®å­—/iOSå±æ€§å…³é”®å­—12.png" > 



<br>
è½¬è½½è¯·æ³¨æ˜ï¼š[iTwinkleçš„åšå®¢](https://itwinkle.github.io/) Â» [iOSå±æ€§å…³é”®å­—](http://iWolf.com/2025/12/iOSå±æ€§å…³é”®å­—)  
   